#!/bin/zsh

. ${HOME}/.sh/.term
[ "${EMACS}" = t ] && unsetopt zle
set_window_title()
{
	command=`echo ${2:-\`basename ${SHELL}\`} | sed -e 's/[[:graph:]]\+=[[:graph:]]\+ \+//' | cut -d ' ' -f 1`
	type ${command} | grep -qe "^${command} is a shell builtin\$" && return
	case ${TERM} in
	screen*) echo -n '\ek'`basename ${command}`'\e\\';;
	esac
}
add-zsh-hook preexec set_window_title
add-zsh-hook precmd set_window_title
